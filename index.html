<html>

<link href="bootstrap/css/bootstrap.css" rel="stylesheet">
<link href="bootstrap/css/bootstrap-theme.css" rel="stylesheet">
<script src="js/jquery-3.1.1.js"></script>
<script src="bootstrap/js/bootstrap.js"></script>

<head>
    <title>Paint the World</title>
    <script src="https://www.gstatic.com/firebasejs/3.6.2/firebase.js"></script>
    <script>
        console.log('yo my man');
        // Initialize Firebase
        // TODO: Replace with your project's customized code snippet
        var config = {
            apiKey: "AIzaSyBe5R-UlRrhLs1mlgTJ4X2NRXcP0dnv6_g",
            authDomain: "mspaintvr.firebaseapp.com",
            databaseURL: "https://mspaintvr.firebaseio.com",
            storageBucket: "mspaintvr.appspot.com",
            messagingSenderId: "940993919791",
        };
        firebase.initializeApp(config);
    </script>
        <meta name="description" content="Paint the World!">
<script src="https://cdnjs.cloudflare.com/ajax/libs/react/0.13.3/react-with-addons.js" type="text/javascript"></script>
    <link href="css/spectrum.css" rel="stylesheet">
    <link href="css/literallycanvas.css" rel="stylesheet">
    <script src="https://use.fontawesome.com/9e19aba51c.js"></script>
    <meta charset="UTF-8">

    <style type="text/css">
          body {
            font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;
            background-color: gray;
          }
          .size1 {
            font-size: 50%;
            padding-bottom: 4px;
          }
          .size2 {
            font-size: 75%;
            padding-bottom: 4px;
          }
          .size3 {
            font-size: 100%;
            padding-bottom: 4px;
          }
          .size4 {
            font-size: 125%;
            padding-bottom: 4px;
          }
          .size5 {
            font-size: 150%;
            padding-bottom: 4px;
          }
          .col-centered {
            float: none;
            margin: 0 auto;
          }
          .panel {
            margin: 30 auto;
            height: 530px;
          }
          .btn {
	border-radius: 0px;
}
    
    </style>
</head>

<body>
    <div>    
        <div class="col-centered col-sm-11">
            <div class="row">
                <div class="col-sm-12 col-centered text-center">
                    <h1> Paint The World </h1>
                </div>
            </div>
            <!-- Stores the literallycanvas canvas -->
            <div class="row">
                <div class="col-lg-12 col-centered" id="canvasArea">
                    <div class="literally"></div>
                    <a id="viewInVR" href="/view/" type="button" class="btn btn-primary btn-lg btn-block disabled">View in VR</a>
                </div>
            </div>
        </div>
    </div>

    <!-- A whole mess of scripts, abandon hope all ye who enter here -->
    <script src="js/literallycanvas.js"></script>
    <script src="js/spectrum.js"></script>
    <script type="text/javascript">
        //THESE ARE HARD-CODED FOR A REASON @ARON
        var imageWidth = 800;
        var imageHeight = 200;
        var drawingData = [];
        var lc = null;
        var tools;
        var strokeWidths;
        var colors;
        var setCurrentByName;
        var findByName;
        var save;

        // the only LC-specific thing we have to do
        var containerOne = document.getElementsByClassName('literally')[0];
        var showLC = function() {

            // disable scrolling on touch devices so we can actually draw
            $(document).bind('touchmove', function(e) {
                if (e.target === document.documentElement) {
                    return e.preventDefault();
                }
            });
            lc = LC.init(containerOne, {
                imageSize: {
                    width: imageWidth,
                    height: imageHeight
                },
                defaultStrokeWidth: 3,
                tools: [
                    LC.tools.Pencil,
                    LC.tools.Pan
                ],
                toolbarPosition: 'top',
                strokeWidths: [2, 3, 5, 7, 8]

            });
            lc.setPan(imageWidth/4, 0);
            lc.setZoom(2.4);
            window.demoLC = lc;

            //lc.setWatermarkImage(watermarkImage);
            save = function(e) {
                //localStorage.setItem('drawing', JSON.stringify(lc.getSnapshot()));
            }
            $('.literally').remove('.lc-undo');
            lc.on('drawingChange', save);
            lc.on('pan', save);
            lc.on('zoom', save);
        };
        $(document).ready(function() {

            // disable scrolling on touch devices so we can actually draw
            $(document).bind('touchmove', function(e) {
                if (e.target === document.documentElement) {
                    return e.preventDefault();
                }
            });
            showLC();
        });

        //Needed for interact with Firebase
        //TODO: Implement firebase xd
        function parseSnapshot(s) {
            for (var i = 0; i < s.shapes.length; i++) {
                console.log(s.shapes.length);
                var shapeData = {};
                var shape = s.shapes[i];
                if (shape.className == 'LinePath') {
                    shapeData.color = shape.data.pointColor;
                    shapeData.size = shape.data.pointSize;
                    shapeData.strokeData = [];
                    for (var j = 0; j < shape.data.smoothedPointCoordinatePairs.length; j++) {

                        //Push da data! ~~~~
                        shapeData.strokeData.push([Math.round(shape.data.smoothedPointCoordinatePairs[j][0] * 100) / 100, Math.round((imageHeight / 2 - shape.data.smoothedPointCoordinatePairs[j][1]) * 100) / 100])
                    }
                    drawingData.push(shapeData);
                }
            }
        }
    </script>
    <script src="js/msPaintvr.js"></script>
    <script src="js/drawingCanvas.js" type="text/javascript"></script>

</body>

</html>